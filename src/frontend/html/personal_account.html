{% extends "base.html" %}
{% block search %}
<form action="/search" method="post" class="search-box" style="display: flex; gap: 8px;">
    <input type="search" name="search_string" placeholder="Search..." class="search-input" required>
    <button type="submit" class="search-button">Search</button>
</form>
{% endblock %}
{% block content %}
<main class="book-catalog">

    <button id="toggleButton" class="mobile-only"></button>
	<div id="hiddenContent" class="desktop-content">
        <div class="side-nav-rating">


            <div class="progress-bars">
                <h3 class="progress-title">Given rating</h3>
                <div class="progress-item">
                    <span class="progress-label">5</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{user_stats.scores[4]}}%;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <span class="progress-label">4</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{user_stats.scores[3]}}%;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <span class="progress-label">3</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{user_stats.scores[2]}}%;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <span class="progress-label">2</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{user_stats.scores[1]}}%;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <span class="progress-label">1</span>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{user_stats.scores[0]}}%;"></div>
                    </div>
                </div>

            </div>
        </div>


    </div>
    <section class="book-list-section" style="margin-bottom: 2rem;">
        <h3>Planned to Read</h3>
        <ul>
            {% for book in user_lists[2] %}
            <li class="book-list-item">
                <a class="book-link" href="/book?id={{book[0].id}}">{{ book[0].title }} — {{ book[0].author }}</a>
                {% if book[1].score %}
                <span class="rating-ball">{{ book[1].score }}</span>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </section>

    <section class="book-list-section" style="margin-bottom: 2rem;">
        <h3>Currently Reading</h3>
        <ul>
            {% for book in user_lists[1] %}
            <li class="book-list-item">
                <a class="book-link" href="/book?id={{book[0].id}}">{{ book[0].title }} — {{ book[0].author }}</a>
                {% if book[1].score %}
                <span class="rating-ball">{{ book[1].score }}</span>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </section>

    <section class="book-list-section" style="margin-bottom: 2rem;">
        <h3>Completed</h3>
        <ul>
            {% for book in user_lists[0] %}
            <li class="book-list-item">
                <a class="book-link" href="/book?id={{book[0].id}}">{{ book[0].title }} — {{ book[0].author }}</a>
                {% if book[1].score %}
                <span class="rating-ball">{{ book[1].score }}</span>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </section>


</main>
{% endblock %}
